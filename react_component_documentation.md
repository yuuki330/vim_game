# Vim学習ゲーム Reactコンポーネント設計書

## 1. コンポーネント階層構造

```
App
├── Header
├── MainMenu
│   ├── Button
│   └── Card
├── GameScreen
│   ├── EditorArea
│   ├── CommandLine
│   ├── StatusBar
│   └── Tooltip
├── LevelSelect
│   ├── Card
│   └── ProgressBar
├── TutorialScreen
│   ├── ProgressBar
│   └── Button
├── SettingsModal
│   └── Button
├── ProfileModal
│   └── Card
├── AchievementModal
│   └── Card
├── LoadingSpinner
└── Notification
```

## 2. 各コンポーネント詳細

### 2.1 App (ルートコンポーネント)

#### 役割
- アプリケーション全体のルートコンポーネント
- ルーティング管理
- グローバル状態管理

#### 状態管理
- 現在の画面状態
- ユーザーデータ
- ゲーム進行状況

#### プロパティ
- なし

### 2.2 Header

#### 役割
- ヘッダー領域の表示
- タイトルロゴ表示
- ユーザープロフィール表示

#### 状態管理
- ユーザー情報（アバター、レベル、ポイント）

#### プロパティ
- `user`: ユーザー情報オブジェクト
- `onProfileClick`: プロフィールクリック時のコールバック

### 2.3 MainMenu

#### 役割
- メインメニュー画面の表示
- 各機能へのナビゲーション

#### 状態管理
- メニュー選択状態

#### プロパティ
- `onStartGame`: ゲーム開始ボタンクリック時のコールバック
- `onTutorial`: チュートリアル開始ボタンクリック時のコールバック
- `onLevelSelect`: レベル選択ボタンクリック時のコールバック
- `onSettings`: 設定ボタンクリック時のコールバック

### 2.4 GameScreen

#### 役割
- メインゲーム画面の表示
- エディタ、コマンドライン、ステータスバーの配置

#### 状態管理
- 現在のゲーム状態
- エディタコンテンツ
- コマンド履歴

#### プロパティ
- `levelData`: 現在のレベルデータ
- `onCommandSubmit`: コマンド送信時のコールバック
- `onExit`: 終了ボタンクリック時のコールバック

### 2.5 EditorArea

#### 役割
- コードエディタ領域の表示
- コードの表示とハイライト

#### 状態管理
- 編集中のコード
- カーソル位置
- 選択範囲

#### プロパティ
- `code`: 表示するコード
- `onChange`: コード変更時のコールバック
- `readOnly`: 読み取り専用フラグ

### 2.6 CommandLine

#### 役割
- コマンド入力領域の表示
- コマンド履歴の表示
- オートコンプリート機能

#### 状態管理
- 現在の入力値
- コマンド履歴
- オートコンプリート候補

#### プロパティ
- `commandHistory`: コマンド履歴配列
- `onSubmit`: コマンド送信時のコールバック
- `autoCompleteOptions`: オートコンプリートオプション

### 2.7 StatusBar

#### 役割
- ステータスバーの表示
- ポイント、タイマー、コンボ等の表示

#### 状態管理
- ポイント
- 残り時間
- コンボ数

#### プロパティ
- `points`: 現在のポイント
- `timeLeft`: 残り時間
- `combo`: 現在のコンボ数

### 2.8 LevelSelect

#### 役割
- レベル選択画面の表示
- レベルカードのグリッド表示

#### 状態管理
- 選択されたレベル
- フィルター条件

#### プロパティ
- `levels`: レベルデータ配列
- `onLevelSelect`: レベル選択時のコールバック
- `onFilterChange`: フィルター変更時のコールバック

### 2.9 TutorialScreen

#### 役割
- チュートリアル画面の表示
- ステップバイステップのガイド

#### 状態管理
- 現在のチュートリアルステップ
- ユーザーの進行状況

#### プロパティ
- `steps`: チュートリアルステップ配列
- `currentStep`: 現在のステップ
- `onStepComplete`: ステップ完了時のコールバック
- `onTutorialComplete`: チュートリアル完了時のコールバック

### 2.10 SettingsModal

#### 役割
- 設定画面モーダルの表示
- 各種設定項目の編集

#### 状態管理
- 設定値
- 変更された設定

#### プロパティ
- `settings`: 現在の設定オブジェクト
- `onSave`: 保存ボタンクリック時のコールバック
- `onClose`: 閉じるボタンクリック時のコールバック

### 2.11 ProfileModal

#### 役割
- プロフィール画面モーダルの表示
- ユーザー情報、統計情報の表示

#### 状態管理
- ユーザー統計データ

#### プロパティ
- `user`: ユーザー情報オブジェクト
- `statistics`: 統計情報オブジェクト
- `onClose`: 閉じるボタンクリック時のコールバック

### 2.12 AchievementModal

#### 役割
- アチーブメント表示モーダルの表示
- 解放済み/未解放アチーブメントの表示

#### 状態管理
- アチーブメントデータ

#### プロパティ
- `achievements`: アチーブメントデータ配列
- `onClose`: 閉じるボタンクリック時のコールバック

### 2.13 Button

#### 役割
- 再利用可能なボタンコンポーネント

#### 状態管理
- ホバー状態
- 押下状態

#### プロパティ
- `label`: ボタンラベル
- `onClick`: クリック時のコールバック
- `variant`: ボタンスタイル（primary, secondary, danger等）
- `disabled`: 無効状態フラグ

### 2.14 ProgressBar

#### 役割
- プログレスバーの表示

#### 状態管理
- 進捗状況

#### プロパティ
- `progress`: 進捗値（0-100）
- `label`: ラベルテキスト

### 2.15 Card

#### 役割
- 再利用可能なカードコンポーネント

#### 状態管理
- なし

#### プロパティ
- `title`: カードタイトル
- `content`: カードコンテンツ
- `onClick`: クリック時のコールバック

### 2.16 Tooltip

#### 役割
- ツールチップの表示

#### 状態管理
- 表示状態

#### プロパティ
- `content`: ツールチップコンテンツ
- `position`: 表示位置

### 2.17 LoadingSpinner

#### 形状
- ローディングスピナーの表示

#### 状態管理
- なし

#### プロパティ
- `visible`: 表示フラグ

### 2.18 Notification

#### 役割
- 通知メッセージの表示

#### 状態管理
- 表示メッセージ
- 表示状態

#### プロパティ
- `message`: 通知メッセージ
- `type`: 通知タイプ（success, error, warning, info）
- `duration`: 表示時間（ミリ秒）

## 3. 状態管理方針

### 3.1 Context APIの使用
- ユーザーデータ
- ゲーム設定
- アチーブメントデータ

### 3.2 コンポーネントローカルステート
- UI表示状態
- 一時的な入力値
- アニメーション状態

## 4. ルーティング

### 4.1 ルート定義
- `/`: メインメニュー
- `/game/:levelId`: ゲーム画面
- `/levels`: レベル選択
- `/tutorial`: チュートリアル
- `/settings`: 設定（モーダル）

このコンポーネント設計書を基に、Reactを用いたVim学習ゲームの開発を進めることができます。
